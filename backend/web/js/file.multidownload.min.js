(function(a){a(document).on("change",".multi-download, .select-on-check-all",function(){var c=a("th.action-column");c.removeAttr("style");if(0<a(".multi-download:checked").length){var b=document.createElement("a");b.className="btn btn-warning btn-xs";b.innerHTML="Download All";b.id="download-all";c.attr("style","text-align: right; padding-right: 50px;")}b||c.html(b)||!b||c.html("&nbsp;")});a(document).on("click","#download-all",function(){var c=a(".multi-download"),b=a("#selection-col").data("download-url"),
d=a("body");d.waitloader("show");0<c.length&&b?a.ajax({url:b,method:"POST",data:c.serialize(),error:function(b){d.waitloader("remove");var a;try{a=JSON.parse(b.responseText)}catch(c){a={message:c.message}}alert(a.message);console.log(b.responseText)},success:function(a){d.waitloader("remove");a.downloadUrl?window.location=a.downloadUrl:alert("Error")}}):(d.waitloader("remove"),console.log("Cannot download, checkboxes unchecked or url does'n set"))})})(jQuery);
